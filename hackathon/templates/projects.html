<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Detect your chance at winning">
    <title>HackPredict</title>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>
    <link
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        rel="stylesheet">
    <link
        href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css"
        rel="stylesheet">
    <script
        src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

    <style>
        .top-buffer {
            margin-top: 20px;
        }
    </style>

    <!--<style>-->
    <!--body {-->
    <!--background-color: #43BFC7;-->
    <!--color: white;-->
    <!--font-family: "Century Gothic", "Trebuchet MS", Helvetica, sans-serif;-->
    <!--}-->

    <!--h1 {-->
    <!--font-family: "Arial Black", Gadget, sans-serif;-->
    <!--}-->

    <!--main {-->
    <!--margin: auto;-->
    <!--text-align: center;-->
    <!--}-->

    <!--#result {-->
    <!--margin-top: 3%;-->
    <!--margin-bottom: 5%;-->
    <!--}-->

    <!--label {-->
    <!--display: block;-->
    <!--margin-bottom: 5px;-->
    <!--}-->

    <!--textarea {-->
    <!--border: 1px solid #cccccc;-->
    <!--resize: none;-->
    <!--width: 50%;-->
    <!--}-->

    <!--</style>-->

</head>

<body>

<nav class="navbar navbar-default">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="{% url 'home' %}">Home</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="active"><a href="{% url 'projects' %}">Discovery<span class="sr-only">(current)</span></a></li>
                <li><a href="#">Link</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <form>
        <label for="tech_tags"></label>
        <select name="tech_tags" id="tech_tags" class="form-control" multiple>
            {% for each_technology in technology %}
            <option value="{{ each_technology }}">{{ each_technology }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-default">Submit</button>
    </form>
</div>

<div class="container" id="projects_results">

</div>

<div class="container" id="project_results">
    <div class="row">
        {% for project in projects %}
        <div class="col-md-4 col-sm-6 col-xs-12 top-buffer">
            <a href="{{ project.url }}">
                <img src="{{ project.thumbnail }}" class="img-thumbnail" alt="{{ project.name }}" width="304"
                     height="236">
            </a>
            <br/>
            <a href="{{ project.url }}">{{ project.name }}</a>
        </div>
        {% endfor %}
    </div>
</div>

<script>
    var select2Params = {
        ajax: {
            url: "{% url 'tech_search' %}",
            dataType: 'json',
            delay: 250,
            data: function (params) {
                return {
                    query: params.term
                };
            },
            processResults: function (data, params) {
                return {
                    results: data.items
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        },
        minimumInputLength: 1,
        placeholder: 'Filter by tag',
        allowClear: true
    };

    $("#tech_tags").prop("selectedIndex", -1);
    $("#tech_tags").select2(select2Params).on('select2:open', function () {

        $('.select2-dropdown--above').attr('id', 'fix');
        $('#fix').removeClass('select2-dropdown--above');
        $('#fix').addClass('select2-dropdown--below');

    });

</script>
</body>